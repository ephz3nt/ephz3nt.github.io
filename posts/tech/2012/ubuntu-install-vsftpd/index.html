<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content=#494f5c><meta name=msapplication-TileColor content=#494f5c><meta itemprop=name content=Ubuntu下安装vsftpd><meta itemprop=description content="装了lnmp后FTP管理装的是pureftpd，后来感觉不好用，后台管理那里用户的UID和GID搞不懂，登陆上权限也不够，后来安装了lnmp自带的vsftpd好像也不能用，还是不用它的吧，
先卸载。
 cd / (切换根目录) 停止pureftpd进程，运行命令： /root/pureftpd stop 删除文件，运行命令：
rm -rf /usr/local/pureftpd rm -rf /home/wwwroot/ftp （管理程序的位置，请根据实际情况设置） rm /root/pureftpd   安装vsftpd
sudo apt-get install vsftpd  这个命令的确可以安装，但是搞不懂 有的这个可以用，有的就不行
我84的VPS执行这个命令返回的就是
root@272929:~# sudo apt-get install vsftpd Reading package lists... Done Building dependency tree... Done E: Couldn't find package vsftpd root@272929:~#  安装好以后配置一下
可以vi etc/vsftpd.conf 进行编辑也可以用winscp
#独立运行 listen=YES&gt; #是否启用匿名访问 anonymous_enable=no #本地用户登录 local_enable=YES #FTP目录 local_root=/soft #访问端口 listen_port=21 #下面3段是后来加的，解决了本地用户不能登录的问题 #好像是vsftpd首先要检测拒绝的账号列表，如果没有这个列表就会全部认为是拒绝的 chroot_local_user=YES userlist_enable=YES userlist_deny=YES #允许本地用户写入和删除 write_enable=YES dirmessage_enable=YES use_localtime=YES xferlog_enable=YES connect_from_port_20=no secure_chroot_dir=/var/run/vsftpd/empty pam_service_name=ftp rsa_cert_file=/etc/ssl/private/vsftpd."><meta itemprop=datePublished content=2012-02-05T05:07:54&#43;00:00><meta itemprop=dateModified content=2012-02-05T05:07:54&#43;00:00><meta itemprop=wordCount content=119><meta itemprop=keywords content=Ubuntu,vsftpd,><meta property=og:title content=Ubuntu下安装vsftpd><meta property=og:description content="装了lnmp后FTP管理装的是pureftpd，后来感觉不好用，后台管理那里用户的UID和GID搞不懂，登陆上权限也不够，后来安装了lnmp自带的vsftpd好像也不能用，还是不用它的吧，
先卸载。
 cd / (切换根目录) 停止pureftpd进程，运行命令： /root/pureftpd stop 删除文件，运行命令：
rm -rf /usr/local/pureftpd rm -rf /home/wwwroot/ftp （管理程序的位置，请根据实际情况设置） rm /root/pureftpd   安装vsftpd
sudo apt-get install vsftpd  这个命令的确可以安装，但是搞不懂 有的这个可以用，有的就不行
我84的VPS执行这个命令返回的就是
root@272929:~# sudo apt-get install vsftpd Reading package lists... Done Building dependency tree... Done E: Couldn't find package vsftpd root@272929:~#  安装好以后配置一下
可以vi etc/vsftpd.conf 进行编辑也可以用winscp
#独立运行 listen=YES&gt; #是否启用匿名访问 anonymous_enable=no #本地用户登录 local_enable=YES #FTP目录 local_root=/soft #访问端口 listen_port=21 #下面3段是后来加的，解决了本地用户不能登录的问题 #好像是vsftpd首先要检测拒绝的账号列表，如果没有这个列表就会全部认为是拒绝的 chroot_local_user=YES userlist_enable=YES userlist_deny=YES #允许本地用户写入和删除 write_enable=YES dirmessage_enable=YES use_localtime=YES xferlog_enable=YES connect_from_port_20=no secure_chroot_dir=/var/run/vsftpd/empty pam_service_name=ftp rsa_cert_file=/etc/ssl/private/vsftpd."><meta property=og:type content=article><meta property=og:url content=https://painso.com/posts/tech/2012/ubuntu-install-vsftpd/><meta property=article:published_time content=2012-02-05T05:07:54+00:00><meta property=article:modified_time content=2012-02-05T05:07:54+00:00><meta name=twitter:card content=summary><meta name=twitter:title content=Ubuntu下安装vsftpd><meta name=twitter:description content="装了lnmp后FTP管理装的是pureftpd，后来感觉不好用，后台管理那里用户的UID和GID搞不懂，登陆上权限也不够，后来安装了lnmp自带的vsftpd好像也不能用，还是不用它的吧，
先卸载。
 cd / (切换根目录) 停止pureftpd进程，运行命令： /root/pureftpd stop 删除文件，运行命令：
rm -rf /usr/local/pureftpd rm -rf /home/wwwroot/ftp （管理程序的位置，请根据实际情况设置） rm /root/pureftpd   安装vsftpd
sudo apt-get install vsftpd  这个命令的确可以安装，但是搞不懂 有的这个可以用，有的就不行
我84的VPS执行这个命令返回的就是
root@272929:~# sudo apt-get install vsftpd Reading package lists... Done Building dependency tree... Done E: Couldn't find package vsftpd root@272929:~#  安装好以后配置一下
可以vi etc/vsftpd.conf 进行编辑也可以用winscp
#独立运行 listen=YES&gt; #是否启用匿名访问 anonymous_enable=no #本地用户登录 local_enable=YES #FTP目录 local_root=/soft #访问端口 listen_port=21 #下面3段是后来加的，解决了本地用户不能登录的问题 #好像是vsftpd首先要检测拒绝的账号列表，如果没有这个列表就会全部认为是拒绝的 chroot_local_user=YES userlist_enable=YES userlist_deny=YES #允许本地用户写入和删除 write_enable=YES dirmessage_enable=YES use_localtime=YES xferlog_enable=YES connect_from_port_20=no secure_chroot_dir=/var/run/vsftpd/empty pam_service_name=ftp rsa_cert_file=/etc/ssl/private/vsftpd."><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>Ubuntu下安装vsftpd</title><link rel=stylesheet href=https://painso.com/css/style.min.adb4e738c83b4cc0eea8000ca83f72188a2ac1fd188a1e6f7cea8a7fa75cd7b1.css integrity="sha256-rbTnOMg7TMDuqAAMqD9yGIoqwf0Yih5vfOqKf6dc17E=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp faster"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://painso.com>ephz3nt</a></div><nav class="site-nav hide-in-mobile"><a href=https://painso.com/posts/>Posts</a>
<a href=https://painso.com/about-me/>About</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://github.com/ephz3nt target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0 0 20 4.77 5.07 5.07.0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38.0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 0 0 5 4.77a5.44 5.44.0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 0 0 9 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><path d="M3 12H21z"/><path d="M3 6H21z"/><path d="M3 18H21z"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://painso.com/posts/>Posts</a></li><li><a href=https://painso.com/about-me/>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>Feb 5, 2012</span></div><h1>Ubuntu下安装vsftpd</h1></header><div class=content><p>装了lnmp后FTP管理装的是pureftpd，后来感觉不好用，后台管理那里用户的UID和GID搞不懂，登陆上权限也不够，后来安装了lnmp自带的vsftpd好像也不能用，还是不用它的吧，</p><p>先卸载。</p><ol><li>cd / (切换根目录)</li><li>停止pureftpd进程，运行命令： /root/pureftpd stop</li><li><p>删除文件，运行命令：</p><pre><code>rm -rf /usr/local/pureftpd
rm -rf /home/wwwroot/ftp （管理程序的位置，请根据实际情况设置）
rm /root/pureftpd
</code></pre></li></ol><p>安装vsftpd</p><pre><code>sudo apt-get install vsftpd
</code></pre><p>这个命令的确可以安装，但是搞不懂 有的这个可以用，有的就不行</p><p>我84的VPS执行这个命令返回的就是</p><pre><code>root@272929:~# sudo apt-get install vsftpd
Reading package lists... Done
Building dependency tree... Done
E: Couldn't find package vsftpd
root@272929:~#
</code></pre><p>安装好以后配置一下</p><p>可以vi etc/vsftpd.conf 进行编辑也可以用winscp</p><pre><code>#独立运行
listen=YES&gt;

#是否启用匿名访问
anonymous_enable=no

#本地用户登录
local_enable=YES

#FTP目录
local_root=/soft

#访问端口
listen_port=21

#下面3段是后来加的，解决了本地用户不能登录的问题
#好像是vsftpd首先要检测拒绝的账号列表，如果没有这个列表就会全部认为是拒绝的
chroot_local_user=YES
userlist_enable=YES
userlist_deny=YES
#允许本地用户写入和删除
write_enable=YES
dirmessage_enable=YES
use_localtime=YES
xferlog_enable=YES
connect_from_port_20=no
secure_chroot_dir=/var/run/vsftpd/empty
pam_service_name=ftp
rsa_cert_file=/etc/ssl/private/vsftpd.pem
</code></pre><p>将以上配置复制替换掉原etc/vsftpd.conf文件即可</p><p>重启vsftpd : service vsftpd restart</p><p>添加FTP账号</p><p><code>useradd -d (用户家目录) -s /sbin/nologin 用户名</code></p><p>如：</p><p><code>useradd -d /soft -s /sbin/nologin ftpuser01</code></p><p>设置密码：</p><p><code>passwd ftpuser01</code></p><p>重复输入2次即可</p><p>目录的权限要给FTP的账号</p><p>先修改目录的权限然后赋予FTP账号</p><p><code>chmod -R 775 目录</code></p><p><code>chown -R 用户名.用户组 目录</code></p><p>比如我的wordpress网站根目录作为FTP的目录，为了不让www用户对博客目录的权限发生改变，可以这样写</p><p><code>chown -R www.FTP用户名 /home/wwwroot</code></p><p>这样FTP用户可以访问上传删除，我WP博客安装插件又不用填写FTP信息</p><p>无法登陆FTP是因为没有添加拒绝账号列表</p><p>在/etc 目录下建立vsftpd.user_list 这个文件，添加拒绝登录的账号“root就可以了，一行一个</p><p>好了，好像差不多了，新手 如有不足之处望指教。</p></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83.0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><path d="M7 7V7z"/></svg><span class=tag><a href=https://painso.com/tags/ubuntu>Ubuntu</a></span><span class=tag><a href=https://painso.com/tags/vsftpd>vsftpd</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2V8h6"/><path d="M16 13H8z"/><path d="M16 17H8z"/><path d="M10 9H9 8"/></svg></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><path d="M16 2V6z"/><path d="M8 2V6z"/><path d="M3 10H21z"/></svg>2012-02-05 05:07 &#43;0000</p></footer></article><div class="post-nav thin"><a class=next-post href=https://painso.com/posts/tech/2012/dropbox-dnspod-incapsula-cdn-file-domestic-users-can-download-the-dropbox-file/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><path d="M19 12H5z"/><path d="M12 19 5 12l7-7"/></svg>&nbsp;</span><br><span>DNSPOD&#43;Incapsula CDN实现文件国内用户可下载Dropbox文件以及外链</span></a>
<a class=prev-post href=https://painso.com/posts/thinking/2012/im-back/><span class=post-nav-label>&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><path d="M5 12H19z"/><path d="M12 5l7 7-7 7"/></svg></span><br><span>回来了。</span></a></div><div id=comments class=thin><div id=utter-container></div><script src=https://utteranc.es/client.js repo=ephz3nt/blog-comments issue-term=title theme=github-light crossorigin=anonymous async></script></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2020 <a href=https://painso.com>ephz3nt</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://painso.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://painso.com/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-56069703-3','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>