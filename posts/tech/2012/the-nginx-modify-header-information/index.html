<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content=#494f5c><meta name=msapplication-TileColor content=#494f5c><meta itemprop=name content=Nginx修改Header信息。><meta itemprop=description content='Header信息是访客访问你的网站时，web服务返回给客户端的一段信息，包含了网页的一些基本情况。那么为什么要修改 header信息呢？主要是为了防止被居心不良的人利用来获取漏洞信息，例如：通过最最简单的获取Header信息发现你的web服务器版本是 nginx/1.0.13，现在又已知这个版本的nginx有某个漏洞，那么就可以利用这个漏洞来攻击你了。互联网信息更新非常快，web服务程序的更新 也是很频繁，我们很多时候由于种种原因不能及时打上补丁，对服务器安全很不利，如果修改header信息达到隐藏web服务器版本的效果，就可以在某种程 度上消除一些隐患。 首先需要修改nginx.h这个文件，一般在安装目录下面的src/core/nginx.h。因为之前我装的是LNMP一键安装包，所以就在LNMP目录下的nginx-x.x.x.x下面，
 vi 编辑一下nginx.h/*
Copyright (C) Igor Sysoev */ ifndef NGINX_HINCLUDED_ define NGINX_HINCLUDED_ define nginx_version 1000010 define NGINX_VERSION "1.0.0.1" define NGINX_VER "nginx/" NGINX_VERSION define NGINX_VAR "NGINX" define NGX_OLDPID_EXT ".oldbin" endif /* NGINX_HINCLUDED_ */  只需要修改
define NGINX_VERSION 对应的版本值，不填的话留空 如&rdquo;&rdquo;
define NGINX_VER "nginx/" NGINX_VERSION  在这里&rdquo;nginx/&ldquo; nginx/修改成你想显示的Server信息 /看不填，看个人需求。
编辑好以后回到NGINX安装目录下面输入：
./configure --user=www --group=www --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-ipv6 再输入
make
编译完成后的NGINX文件在 objs文件夹下，先备份一下原来的 &gt; cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak &gt; 把新的NGINX文件复制过去，需先停止NGINX服务哦：service nginx stop &gt; cp objs/nginx /usr/local/nginx/sbin/ &gt; service nginx start'><meta itemprop=datePublished content=2012-03-15T00:58:48&#43;00:00><meta itemprop=dateModified content=2012-03-15T00:58:48&#43;00:00><meta itemprop=wordCount content=86><meta itemprop=keywords content=Header,Nginx,修改,><meta property=og:title content=Nginx修改Header信息。><meta property=og:description content='Header信息是访客访问你的网站时，web服务返回给客户端的一段信息，包含了网页的一些基本情况。那么为什么要修改 header信息呢？主要是为了防止被居心不良的人利用来获取漏洞信息，例如：通过最最简单的获取Header信息发现你的web服务器版本是 nginx/1.0.13，现在又已知这个版本的nginx有某个漏洞，那么就可以利用这个漏洞来攻击你了。互联网信息更新非常快，web服务程序的更新 也是很频繁，我们很多时候由于种种原因不能及时打上补丁，对服务器安全很不利，如果修改header信息达到隐藏web服务器版本的效果，就可以在某种程 度上消除一些隐患。 首先需要修改nginx.h这个文件，一般在安装目录下面的src/core/nginx.h。因为之前我装的是LNMP一键安装包，所以就在LNMP目录下的nginx-x.x.x.x下面，
 vi 编辑一下nginx.h/*
Copyright (C) Igor Sysoev */ ifndef NGINX_HINCLUDED_ define NGINX_HINCLUDED_ define nginx_version 1000010 define NGINX_VERSION "1.0.0.1" define NGINX_VER "nginx/" NGINX_VERSION define NGINX_VAR "NGINX" define NGX_OLDPID_EXT ".oldbin" endif /* NGINX_HINCLUDED_ */  只需要修改
define NGINX_VERSION 对应的版本值，不填的话留空 如&rdquo;&rdquo;
define NGINX_VER "nginx/" NGINX_VERSION  在这里&rdquo;nginx/&ldquo; nginx/修改成你想显示的Server信息 /看不填，看个人需求。
编辑好以后回到NGINX安装目录下面输入：
./configure --user=www --group=www --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-ipv6 再输入
make
编译完成后的NGINX文件在 objs文件夹下，先备份一下原来的 &gt; cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak &gt; 把新的NGINX文件复制过去，需先停止NGINX服务哦：service nginx stop &gt; cp objs/nginx /usr/local/nginx/sbin/ &gt; service nginx start'><meta property=og:type content=article><meta property=og:url content=https://painso.com/posts/tech/2012/the-nginx-modify-header-information/><meta property=article:published_time content=2012-03-15T00:58:48+00:00><meta property=article:modified_time content=2012-03-15T00:58:48+00:00><meta name=twitter:card content=summary><meta name=twitter:title content=Nginx修改Header信息。><meta name=twitter:description content='Header信息是访客访问你的网站时，web服务返回给客户端的一段信息，包含了网页的一些基本情况。那么为什么要修改 header信息呢？主要是为了防止被居心不良的人利用来获取漏洞信息，例如：通过最最简单的获取Header信息发现你的web服务器版本是 nginx/1.0.13，现在又已知这个版本的nginx有某个漏洞，那么就可以利用这个漏洞来攻击你了。互联网信息更新非常快，web服务程序的更新 也是很频繁，我们很多时候由于种种原因不能及时打上补丁，对服务器安全很不利，如果修改header信息达到隐藏web服务器版本的效果，就可以在某种程 度上消除一些隐患。 首先需要修改nginx.h这个文件，一般在安装目录下面的src/core/nginx.h。因为之前我装的是LNMP一键安装包，所以就在LNMP目录下的nginx-x.x.x.x下面，
 vi 编辑一下nginx.h/*
Copyright (C) Igor Sysoev */ ifndef NGINX_HINCLUDED_ define NGINX_HINCLUDED_ define nginx_version 1000010 define NGINX_VERSION "1.0.0.1" define NGINX_VER "nginx/" NGINX_VERSION define NGINX_VAR "NGINX" define NGX_OLDPID_EXT ".oldbin" endif /* NGINX_HINCLUDED_ */  只需要修改
define NGINX_VERSION 对应的版本值，不填的话留空 如&rdquo;&rdquo;
define NGINX_VER "nginx/" NGINX_VERSION  在这里&rdquo;nginx/&ldquo; nginx/修改成你想显示的Server信息 /看不填，看个人需求。
编辑好以后回到NGINX安装目录下面输入：
./configure --user=www --group=www --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-ipv6 再输入
make
编译完成后的NGINX文件在 objs文件夹下，先备份一下原来的 &gt; cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak &gt; 把新的NGINX文件复制过去，需先停止NGINX服务哦：service nginx stop &gt; cp objs/nginx /usr/local/nginx/sbin/ &gt; service nginx start'><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>Nginx修改Header信息。</title><link rel=stylesheet href=https://painso.com/css/style.min.5ee5e7976cd09872c64e40a582206543f6aa38c69a8c43898aadc70040344b92.css integrity="sha256-XuXnl2zQmHLGTkClgiBlQ/aqOMaajEOJiq3HAEA0S5I=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp faster"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://painso.com>ephz3nt</a></div><nav class="site-nav hide-in-mobile"><a href=https://painso.com/posts/>Posts</a>
<a href=https://painso.com/about-me/>About</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://github.com/ephz3nt target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0 0 20 4.77 5.07 5.07.0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38.0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 0 0 5 4.77a5.44 5.44.0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 0 0 9 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><path d="M3 12H21z"/><path d="M3 6H21z"/><path d="M3 18H21z"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://painso.com/posts/>Posts</a></li><li><a href=https://painso.com/about-me/>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>Mar 15, 2012</span></div><h1>Nginx修改Header信息。</h1></header><div class=content><blockquote><p>Header信息是访客访问你的网站时，web服务返回给客户端的一段信息，包含了网页的一些基本情况。那么为什么要修改 header信息呢？主要是为了防止被居心不良的人利用来获取漏洞信息，例如：通过最最简单的获取Header信息发现你的web服务器版本是 nginx/1.0.13，现在又已知这个版本的nginx有某个漏洞，那么就可以利用这个漏洞来攻击你了。互联网信息更新非常快，web服务程序的更新 也是很频繁，我们很多时候由于种种原因不能及时打上补丁，对服务器安全很不利，如果修改header信息达到隐藏web服务器版本的效果，就可以在某种程 度上消除一些隐患。
首先需要修改nginx.h这个文件，一般在安装目录下面的src/core/nginx.h。因为之前我装的是LNMP一键安装包，所以就在LNMP目录下的nginx-x.x.x.x下面，</p></blockquote><p>vi 编辑一下nginx.h/*</p><pre><code>Copyright (C) Igor Sysoev

*/

ifndef NGINX_HINCLUDED_

define NGINX_HINCLUDED_

define nginx_version 1000010

define NGINX_VERSION &quot;1.0.0.1&quot;

define NGINX_VER &quot;nginx/&quot; NGINX_VERSION

define NGINX_VAR &quot;NGINX&quot;

define NGX_OLDPID_EXT &quot;.oldbin&quot;

endif /* NGINX_HINCLUDED_ */
</code></pre><p>只需要修改</p><p><code>define NGINX_VERSION</code> 对应的版本值，不填的话留空 如&rdquo;&rdquo;</p><p><code>define NGINX_VER          &quot;nginx/&quot; NGINX_VERSION </code>  在这里&rdquo;nginx/&ldquo;  nginx/修改成你想显示的Server信息 /看不填，看个人需求。</p><p>编辑好以后回到NGINX安装目录下面输入：</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>./configure --user<span class=o>=</span>www --group<span class=o>=</span>www --prefix<span class=o>=</span>/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-ipv6</code></pre></div><p>再输入</p><p><code>make</code></p><p>编译完成后的NGINX文件在 objs文件夹下，先备份一下原来的
&gt; cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak
&gt; 把新的NGINX文件复制过去，需先停止NGINX服务哦：service nginx stop
&gt; cp objs/nginx /usr/local/nginx/sbin/
&gt; service nginx start</p><p>2013.6.13更新：</p><p>有些按照上方操作还是无法修改Header信息，经查看还需要修改 安装目录下的src/http/ngx_http_header_filter_module.c</p><p><a href=/images/2012/03/nginx-header-filter.jpg><img src=/images/2012/03/nginx-header-filter-300x169.jpg alt=nginx-header-filter></a></p><p>如图，按照自己的喜好修改即可，这样设置完毕后发现出现默认Nginx 404页面时底部还是会显示nginx相关的信息，原因为nginx.conf里的server_tokens关闭，编辑nginx.conf找到server_tokens = off;将off改为on即可</p><p>大功告成。</p><p><a href=/images/2012/03/nginx.jpg><img src=/images/2012/03/nginx-300x110.jpg alt=nginx></a></p></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83.0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><path d="M7 7V7z"/></svg><span class=tag><a href=https://painso.com/tags/header>Header</a></span><span class=tag><a href=https://painso.com/tags/nginx>Nginx</a></span><span class=tag><a href=https://painso.com/tags/%E4%BF%AE%E6%94%B9>修改</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2V8h6"/><path d="M16 13H8z"/><path d="M16 17H8z"/><path d="M10 9H9 8"/></svg></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><path d="M16 2V6z"/><path d="M8 2V6z"/><path d="M3 10H21z"/></svg>2012-03-15 00:58 &#43;0000</p></footer></article><div class="post-nav thin"><a class=next-post href=https://painso.com/posts/tech/2012/gae-proxy-browser/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><path d="M19 12H5z"/><path d="M12 19 5 12l7-7"/></svg>&nbsp;</span><br><span>科学使用GAE(Google App Engine)&#43;谷歌浏览器搭建代理上网。</span></a>
<a class=prev-post href=https://painso.com/posts/tech/2012/custom-incapsula-cdn-nodes/><span class=post-nav-label>&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><path d="M5 12H19z"/><path d="M12 5l7 7-7 7"/></svg></span><br><span>自定义使用Incapsula的CDN节点。</span></a></div><div id=comments class=thin><div id=utter-container></div><script src=https://utteranc.es/client.js repo=ephz3nt/blog-comments issue-term=title theme=github-light crossorigin=anonymous async></script></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2020 <a href=https://painso.com>ephz3nt</a> &#183; <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://painso.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://painso.com/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin=anonymous></script></body></html>