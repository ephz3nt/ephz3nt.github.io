<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>127.0.0.1 on ephz3nt</title><link>https://painso.com/tags/127.0.0.1/</link><description>Recent content in 127.0.0.1 on ephz3nt</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Fri, 12 Jul 2013 23:45:53 +0000</lastBuildDate><atom:link href="https://painso.com/tags/127.0.0.1/index.xml" rel="self" type="application/rss+xml"/><item><title>[转]PHP连接MySQL主机127.0.0.1与localhost的区别</title><link>https://painso.com/posts/tech/2013/php-connect-mysql-localhost/</link><pubDate>Fri, 12 Jul 2013 23:45:53 +0000</pubDate><guid>https://painso.com/posts/tech/2013/php-connect-mysql-localhost/</guid><description>发现问题
昨天在帮同事编译安装Linux环境时，遇到一个问题： WEB服务器是apache，数据库是MySQL。 于是写了一个测试连接数据库的PHP页面： $mysql = mysql_connect(&#39;localhost&#39;,&#39;root&#39;,&#39;&#39;); 打开 http://localhost/test.php 测试 提示：Can’t connect to local MySQL server through socket... 检查环境正常 以为是数据库没有启动，于是查看一下进程，MySQL在进程里，重启了一下MySQL. 使用mysql -u root -p 可以进入MySQL操作界面 直接使用/usr/local/php5/bin/php /web/test.php执行可以连上数据库 apache也重启了，一样无效 疑点：为何网页执行失败，命令执行却成功 这下就郁闷了，使用php命令直接执行就成功，通过网页执行就失败。难道是apache导致？网上搜索了大堆资料也没找到解决方案，重新编译安装apache问题依旧。 把localhost改成127.0.0.1成功 把localhost改成127.0.0.1后竟然连接成功了，开始陷入思考困局：localhost失败127.0.0.1却成功？ ping localhost 地址是127.0.0.1没错 打开hosts加入 127.0.0.1 qttc 使用qttc当主机连接也正常，唯独就不认localhost。 localhost连接方式不同导致 为了了解PHP连接数据库时，主机填写localhost与其它的区别阅读了大量资料，最后得知： 当主机填写为localhost时mysql会采用 unix domain socket连接 当主机填写为127.0.0.1时mysql会采用tcp方式连接 这是linux套接字网络的特性，win平台不会有这个问题 解决方法 在my.cnf的[mysql]区段里添加 protocol=tcp 保存重启MySQL，问题解决！
原文链接：http://www.qttc.net/201210228.html</description></item></channel></rss>